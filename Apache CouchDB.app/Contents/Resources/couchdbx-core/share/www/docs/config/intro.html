<!--
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
-->

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1. Introduction To Configuring &mdash; Apache CouchDB 2.2 Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="http://docs.couchdb.org/en/stable/config/intro.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/rtd_theme.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="next" title="3.2. Base Configuration" href="couchdb.html" />
    <link rel="prev" title="3. Configuring CouchDB" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Apache CouchDB
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
<h2>Table of Contents</h2>

            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">2. Installation &amp; First-Time Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Configuring CouchDB</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">3.1. Introduction To Configuring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-files">3.1.1. Configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameter-names-and-values">3.1.2. Parameter names and values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-parameters-via-the-configuration-file">3.1.3. Setting parameters via the configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-parameters-via-the-http-api">3.1.4. Setting parameters via the HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-local-node">3.1.5. Configuring the local node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="couchdb.html">3.2. Base Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster.html">3.3. Configuring Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="couch-peruser.html">3.4. couch_peruser</a></li>
<li class="toctree-l2"><a class="reference internal" href="http.html">3.5. CouchDB HTTP Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="auth.html">3.6. Authentication and Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="compaction.html">3.7. Compaction Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">3.8. Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="replicator.html">3.9. Replicator</a></li>
<li class="toctree-l2"><a class="reference internal" href="query-servers.html">3.10. Query Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="http-handlers.html">3.11. HTTP Resource Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="services.html">3.12. CouchDB Internal Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html">3.13. Miscellaneous Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../replication/index.html">4. Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">5. CouchDB Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ddocs/index.html">6. Design Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query-server/index.html">7. Query Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fauxton/index.html">8. Fauxton</a></li>
<li class="toctree-l1"><a class="reference internal" href="../best-practices/index.html">9. Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">10. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster/index.html">11. Cluster Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-structure.html">12. JSON Structure Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental.html">13. Experimental Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">14. Contributing to this Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">15. Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cve/index.html">16. Security Issues Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cve/index.html#reporting-new-security-problems-with-apache-couchdb">17. Reporting New Security Problems with Apache CouchDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">18. About CouchDB Documentation</a></li>
</ul>

            
          
<h2>Quick Reference</h2>
<ul>
<li><a href="../http-api.html">HTTP API Reference</a></li>
<li><a href="../config-ref.html">Configuration Reference</a></li>
</ul>


<h2>Local Links</h2>
<ul>
<li><a href="../">Fauxton</a></li>
</ul>


<h2>More Help</h2>
<ul>
<li><a href="https://couchdb.apache.org/">CouchDB Homepage</a></li>
<li><a href="https://couchdb.apache.org/#mailing-list">Mailing Lists</a></li>
<li><a href="http://webchat.freenode.net/?channels=couchdb">IRC</a></li>
<li><a href="https://github.com/apache/couchdb/issues">Issue Tracker</a></li>
<li><a href="../download.html">Download Docs</a></li>
</ul>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apache CouchDB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">3. Configuring CouchDB</a> &raquo;</li>
        
      <li>3.1. Introduction To Configuring</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/couchdb-documentation/blob/master/src/config/intro" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-to-configuring">
<span id="config-intro"></span><h1>3.1. Introduction To Configuring<a class="headerlink" href="#introduction-to-configuring" title="Permalink to this headline">¶</a></h1>
<div class="section" id="configuration-files">
<h2>3.1.1. Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h2>
<p>By default, CouchDB reads configuration files from the following locations,
in the following order:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">etc/default.ini</span></tt></li>
<li><tt class="docutils literal"><span class="pre">etc/default.d/*.ini</span></tt></li>
<li><tt class="docutils literal"><span class="pre">etc/local.ini</span></tt></li>
<li><tt class="docutils literal"><span class="pre">etc/local.d/*.ini</span></tt></li>
</ol>
<p>All paths are specified relative to the CouchDB installation directory:
<tt class="docutils literal"><span class="pre">/opt/couchdb</span></tt> recommended on UNIX-like systems, <tt class="docutils literal"><span class="pre">C:\CouchDB</span></tt> recommended
on Windows systems, and a combination of two directories on macOS:
<tt class="docutils literal"><span class="pre">Applications/Apache</span> <span class="pre">CouchDB.app/Contents/Resources/couchdbx-core/etc</span></tt> for
the <tt class="docutils literal"><span class="pre">default.ini</span></tt> and <tt class="docutils literal"><span class="pre">default.d</span></tt> directories, and
<tt class="docutils literal"><span class="pre">/Users/youruser/Library/Application</span> <span class="pre">Support/CouchDB2/etc/couchdb</span></tt> for
the <tt class="docutils literal"><span class="pre">local.ini</span></tt> and <tt class="docutils literal"><span class="pre">local.d</span></tt> directories.</p>
<p>Settings in successive documents override the settings in earlier entries.
For example, setting the <a class="reference internal" href="http.html#httpd/bind_address" title="bind_address"><tt class="xref config config-option docutils literal"><span class="pre">httpd/bind_address</span></tt></a> parameter in
<tt class="docutils literal"><span class="pre">local.ini</span></tt> would override any setting in <tt class="docutils literal"><span class="pre">default.ini</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">default.ini</span></tt> file may be overwritten during an upgrade or
re-installation, so localised changes should be made to the <tt class="docutils literal"><span class="pre">local.ini</span></tt>
file or files within the <tt class="docutils literal"><span class="pre">local.d</span></tt> directory.</p>
</div>
<p>The configuration file chain may be changed by setting the ERL_FLAGS
environment variable:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">export </span><span class="nv">ERL_FLAGS</span><span class="o">=</span><span class="s2">&quot;-couch_ini /path/to/my/default.ini /path/to/my/local.ini&quot;</span>
</pre></div>
</div>
<p>or by placing the <tt class="docutils literal"><span class="pre">-couch_ini</span> <span class="pre">..</span></tt> flag directly in the <tt class="docutils literal"><span class="pre">etc/vm.args</span></tt> file.
Passing <tt class="docutils literal"><span class="pre">-couch_ini</span> <span class="pre">..</span></tt> as a command-line argument when launching <tt class="docutils literal"><span class="pre">couchdb</span></tt>
is the same as setting the <tt class="docutils literal"><span class="pre">ERL_FLAGS</span></tt> environment variable.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The environment variable/command-line flag overrides any <tt class="docutils literal"><span class="pre">-couch_ini</span></tt>
option specified in the <tt class="docutils literal"><span class="pre">etc/vm.args</span></tt> file. And, <strong>BOTH</strong> of these
options <strong>completely</strong> override CouchDB from searching in the default
locations. Use these options only when necessary, and be sure to track
the contents of <tt class="docutils literal"><span class="pre">etc/default.ini</span></tt>, which may change in future releases.</p>
</div>
<p>If there is a need to use different <tt class="docutils literal"><span class="pre">vm.args</span></tt> or <tt class="docutils literal"><span class="pre">sys.config</span></tt> files, for
example, in different locations to the ones provided by CouchDB, or you don&#8217;t
want to edit the original files, the default locations may be changed by
setting the COUCHDB_VM_ARGS_FILE or COUCHDB_SYSCONFIG_FILE environment
variables:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">export </span><span class="nv">COUCHDB_VM_ARGS_FILE</span><span class="o">=</span><span class="s2">&quot;/path/to/my/vm.args&quot;</span>
<span class="nb">export </span><span class="nv">COUCHDB_SYSCONFIG_FILE</span><span class="o">=</span><span class="s2">&quot;/path/to/my/sys.config&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="parameter-names-and-values">
<h2>3.1.2. Parameter names and values<a class="headerlink" href="#parameter-names-and-values" title="Permalink to this headline">¶</a></h2>
<p>All parameter names are <em>case-sensitive</em>. Every parameter takes a value of one
of five types: <cite>boolean</cite>, <cite>integer</cite>, <cite>string</cite>, <a class="reference external" href="http://www.erlang.org/doc/reference_manual/data_types.html#id66049">tuple</a> and <a class="reference external" href="http://www.erlang.org/doc/man/proplists.html">proplist</a>.
Boolean values can be written as <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<p>Parameters with value type of <cite>tuple</cite> or <cite>proplist</cite> are following the Erlang
requirement for style and naming.</p>
</div>
<div class="section" id="setting-parameters-via-the-configuration-file">
<h2>3.1.3. Setting parameters via the configuration file<a class="headerlink" href="#setting-parameters-via-the-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>The common way to set some parameters is to edit the <tt class="docutils literal"><span class="pre">local.ini</span></tt> file
(location explained above).</p>
<p>For example:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="c1">; This is a comment</span>
<span class="k">[section]</span>
<span class="na">param</span> <span class="o">=</span> <span class="s">value ; inline comments are allowed</span>
</pre></div>
</div>
<p>Each configuration file line may contains <cite>section</cite> definition, <cite>parameter</cite>
specification, empty (space and newline characters only) or <cite>commented</cite> line.
You can set up <cite>inline</cite> commentaries for <cite>sections</cite> or <cite>parameters</cite>.</p>
<p>The <cite>section</cite> defines group of parameters that are belongs to some specific
CouchDB subsystem. For instance, <a class="reference internal" href="http.html#httpd" title="[httpd]"><tt class="xref config config-section docutils literal"><span class="pre">httpd</span></tt></a> section holds not only HTTP
server parameters, but also others that directly interacts with it.</p>
<p>The <cite>parameter</cite> specification contains two parts divided by the <cite>equal</cite> sign
(<tt class="docutils literal"><span class="pre">=</span></tt>): the parameter name on the left side and the parameter value on the
right one. The leading and following whitespace for <tt class="docutils literal"><span class="pre">=</span></tt> is an optional to
improve configuration readability.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In case when you&#8217;d like to remove some parameter from the <cite>default.ini</cite>
without modifying that file, you may override in <cite>local.ini</cite>, but without
any value:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[httpd_global_handlers]</span>
<span class="na">_all_dbs</span> <span class="o">=</span>
</pre></div>
</div>
<p class="last">This could be read as: &#8220;remove the <cite>_all_dbs</cite> parameter from the
<cite>httpd_global_handlers</cite> section if it was ever set before&#8221;.</p>
</div>
<p>The semicolon (<tt class="docutils literal"><span class="pre">;</span></tt>) signals the start of a comment. Everything after this
character is ignored by CouchDB.</p>
<p>After editing the configuration file, CouchDB should be restarted to apply
any changes.</p>
</div>
<div class="section" id="setting-parameters-via-the-http-api">
<h2>3.1.4. Setting parameters via the HTTP API<a class="headerlink" href="#setting-parameters-via-the-http-api" title="Permalink to this headline">¶</a></h2>
<p>Alternatively, configuration parameters can be set via the
<a class="reference internal" href="../api/server/configuration.html#api-config"><em>HTTP API</em></a>. This API allows changing CouchDB configuration
on-the-fly without requiring a server restart:</p>
<div class="highlight-sh"><div class="highlight"><pre>curl -X PUT http://localhost:5984/_node/&lt;name@host&gt;/_config/uuids/algorithm -d <span class="s1">&#39;&quot;random&quot;&#39;</span>
</pre></div>
</div>
<p>The old parameter&#8217;s value is returned in the response:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="s2">&quot;sequential&quot;</span>
</pre></div>
</div>
<p>You should be careful changing configuration via the HTTP API since it&#8217;s
possible  to make CouchDB unreachable, for example, by changing the
<a class="reference internal" href="http.html#httpd/bind_address" title="bind_address"><tt class="xref config config-option docutils literal"><span class="pre">httpd/bind_address</span></tt></a>:</p>
<div class="highlight-sh"><div class="highlight"><pre>curl -X PUT http://localhost:5984/_node/&lt;name@host&gt;/_config/httpd/bind_address -d <span class="s1">&#39;&quot;10.10.0.128&quot;&#39;</span>
</pre></div>
</div>
<p>If you make a typo or the specified IP address is not available from your
network, CouchDB will be unreachable. The only way to resolve this will be
to remote into the server, correct the config file, and restart CouchDB. To
protect yourself against such accidents you may set the
<a class="reference internal" href="http.html#httpd/config_whitelist" title="config_whitelist"><tt class="xref config config-option docutils literal"><span class="pre">httpd/config_whitelist</span></tt></a> of permitted configuration parameters for
updates via the HTTP API. Once this option is set, further changes to
non-whitelisted parameters must take place via the configuration file, and in
most cases, will also require a server restart before taking effect.</p>
</div>
<div class="section" id="configuring-the-local-node">
<h2>3.1.5. Configuring the local node<a class="headerlink" href="#configuring-the-local-node" title="Permalink to this headline">¶</a></h2>
<p>While the <a class="reference internal" href="../api/server/configuration.html#api-config"><em>HTTP API</em></a> allows configuring all nodes in the
cluster, as a convenience, you can use the literal string <tt class="docutils literal"><span class="pre">_local</span></tt> in place
of the node name, to interact with the local node&#8217;s configuration.  For
example:</p>
<div class="highlight-sh"><div class="highlight"><pre>curl -X PUT http://localhost:5984/_node/_local/_config/uuids/algorithm -d <span class="s1">&#39;&quot;random&quot;&#39;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="couchdb.html" class="btn btn-neutral float-right" title="3.2. Base Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="3. Configuring CouchDB" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Apache Software Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.2.0',
            LANGUAGE:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>